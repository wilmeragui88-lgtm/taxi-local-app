<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TaxiApp</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family: 'Segoe UI', sans-serif;
}

/* ================= SPLASH SCREEN ================= */

#splash{
  position:fixed;
  width:100%;
  height:100vh;
  background: linear-gradient(135deg,#000000,#1c1c1c,#ffcc00);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  color:white;
  z-index:1000;
  transition:opacity 1s ease;
}

.logo{
  font-size:80px;
  animation:float 2s infinite ease-in-out;
}

@keyframes float{
  0%{transform:translateY(0px);}
  50%{transform:translateY(-15px);}
  100%{transform:translateY(0px);}
}

.app-name{
  font-size:32px;
  margin-top:15px;
  font-weight:bold;
}

.start-btn{
  margin-top:40px;
  padding:15px 40px;
  background:#ffcc00;
  border:none;
  border-radius:30px;
  font-size:18px;
  font-weight:bold;
  cursor:pointer;
  transition:0.3s;
}

.start-btn:hover{
  transform:scale(1.1);
}

/* ================= MAP ================= */

#map{
  height:100vh;
  width:100%;
  display:none;
}

.status{
  position:absolute;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:white;
  padding:15px 25px;
  border-radius:20px;
  box-shadow:0 5px 15px rgba(0,0,0,0.3);
  font-weight:bold;
  z-index:500;
}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
  <div class="logo">üöñ</div>
  <div class="app-name">TaxiApp</div>
  <button class="start-btn" onclick="startApp()">Iniciar</button>
</div>

<!-- MAPA -->
<div id="map"></div>
<div class="status" id="status">Esperando ubicaci√≥n...</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
let map;
let userMarker;

/* ================= INICIAR APP ================= */
function startApp(){
  document.getElementById("splash").style.opacity="0";
  setTimeout(()=>{
    document.getElementById("splash").style.display="none";
    document.getElementById("map").style.display="block";
    initMap();
  },1000);
}

/* ================= MAPA ================= */
function initMap(){

  map = L.map('map').setView([13.6929,-89.2182],13);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
    attribution:'¬© OpenStreetMap'
  }).addTo(map);

  if(navigator.geolocation){
    navigator.geolocation.watchPosition(position=>{
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;

      if(!userMarker){
        userMarker = L.marker([lat,lng]).addTo(map)
          .bindPopup("üìç Tu ubicaci√≥n")
          .openPopup();
      }else{
        userMarker.setLatLng([lat,lng]);
      }

      map.setView([lat,lng],15);
      updateStatus("üìç Ubicaci√≥n detectada");
    });
  }
}

function updateStatus(text){
  document.getElementById("status").innerText = text;
}
</script>

</body>
</html>
